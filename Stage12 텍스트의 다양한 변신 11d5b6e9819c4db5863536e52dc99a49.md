# Stage12. 텍스트의 다양한 변신

## 1. 인코딩과 디코딩

변수에 데이터를 할당하면 이 데이터들은 컴퓨터의 주기억장치인 메모리에  저장됩니다. 문자열 데이터가 메모리에 저장될때 컴퓨터 내부에서는 어떤 일이 일어날까요? 컴퓨터는 모든 데이터를 0과1로 변환해서 다룹니다. 이진 데이터의 최소단위는 bit이고, bit가 8개 모이면 byte가 됩니다. 이때 메모리에는 byte로 저장이 됩니다.

![Untitled](Stage12%20%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A1%E1%84%8B%E1%85%A3%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%B5%E1%86%AB%2011d5b6e9819c4db5863536e52dc99a49/Untitled.png)

정리

- byte : 컴퓨터의 기본저장단위, 1byte = 8bit,즉 256개의 고유한값 저장가능
- 인코딩 : 문자열을 바이트로 변환하는 과정
- 디코딩 : 바이트를 문자열로 변환하는 과정

### 텍스트 데이터 처리 과정

![Untitled](Stage12%20%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A1%E1%84%8B%E1%85%A3%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%B5%E1%86%AB%2011d5b6e9819c4db5863536e52dc99a49/Untitled%201.png)

ord() : 해당 문자에 대응하는 유니코드 숫자를 반환합니다.

chr() : 해당 유니코드 숫자에 대응하는 문자를 반환합니다.

## 2. 문자열 다루기

### 원시 문자열

문자열을 시작하는 따옴표 앞에 r을 붙이면 이스케이프 문자가 적용되지 않은 있는 그대로의 원시 문자열을 나타낼 수 있습니다.

```python
print('Please don\'t touch it')
print(r'Please don\'t touch it')
>>>Please don't touch it
>>>Please don\'t touch it
```

### startswith, endwith

- startwith : 지정한 문자로 시작하는 데이터를 불러옵니다.
- endwith : 지엉한 문자로 끝나는 데이터를 불러옵니다.

```python
EmployeeID = ['OB94382', 'OW34723', 'OB32308', 'OB83461',
'OB74830', 'OW37402', 'OW11235', 'OB82345']
Production_Employee = [P for P in EmployeeID if P.startswith('OB')]   # 'OB'로 시작하는 직원 ID를 다 찾아봅니다
Production_Employee
>>>['OB94382', 'OB32308', 'OB83461', 'OB74830', 'OB82345']
```

## 3. 정규 표현식

특정한 단어를 검색할때 자주 사용하는 단어검색기능ctrl + F을 지원하는데요. 이러한 기능이 바로 정규 표현식에 근거해 만들어진 기능이랍니다.

정규 표현식은 특정 규칙을 가진 문자열의 집합을 표현하는 형식 언어로,찾고자 하는 문자열 패턴을 정의하고 기존문자열과 일치하는지를 비교하여 문자열을 검색하거나 다른 문자열로 치환하는데 사용됩니다.

### 구현순서

![Untitled](Stage12%20%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A1%E1%84%8B%E1%85%A3%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%B5%E1%86%AB%2011d5b6e9819c4db5863536e52dc99a49/Untitled%202.png)

- import re를 통해 정규식 모듈을 가져옵니다.
- re.compile() 함수로 Regex객체를 만듭니다.
- 검색할 문자열을 Regex 객체에 search(),findall() 메소드로 전달합니다.

### 메서드

다양한 메서드를 정리해 봅시다.

- search() : 일치하는 패턴 찾기 (일치 패턴이 있으면 MatchObject를 반환합니다)
- match() : search()와 비슷하지만, 처음부터 패턴이 검색 대상과 일치해야 합니다.
- findall() : 일치하는 모든 패턴 찾기 (모든 일치 패턴을 리스트에 담아서 반환합니다)
- split() : 패턴으로 나누기
- sub() : 일치하는 패턴으로 대체하기
- group() : 실제 결과에 해당하는 문자열을 반환합니다.

### 패턴 : 특수문자, 메타 문자

예를 들어  보겠습니다.

```python
text = """
The first season of America Premiere League  was played in 1993.
The second season was played in 1995 in South Africa.
Last season was played in 2019 and won by Chennai Super Kings (CSK).
CSK won the title in 2000 and 2002 as well.
Mumbai Indians (MI) has also won the title 3 times in 2013, 2015 and 2017.
"""
pattern = re.compile("[1-2]\d\d\d")
pattern.findall(text)
>>>['1993', '1995', '2019', '2000', '2002', '2013', '2015', '2017']
```

```python
text = "My e-mail adress is [doingharu@aiffel.com](mailto:doingharu@aiffel.com), and [tomorrow@aiffel.com](mailto:tomorrow@aiffel.com)"
pattern = re.compile("[0-9a-zA-Z]+@[0-9a-z]+\.[0-9a-z]+")
pattern.findall(text)
>>>['doingharu@aiffel.com', 'tomorrow@aiffel.com']
```

## 4. 파일

지금까지 문자열을 변수에 저장했습니다. 변수에 저장되는 데이터는 컴퓨터 메모리에 저장되지만, 일정 전원이 공급되어야만 데이터가 보존됩니다. 하지만 데이터를 영구적으로 보존할 필요가 있기때문에 우리는 보조기억장치에 데이터를 저장합니다. 이것을 파일이라고 합니다. 

### write

파일을 수정하려면 어떻게 해야할까요? 파일을 열고 객체로 만들어 주는 작업을 한번 해보겠습니다.

```python
f = open("hello.txt","w")
for i in range(10):
	f.write("안녕")

f.close()

print("완료!")
>>완료!
```

### read

이번에는 파일을 읽어 보겠습니다. 

```python
with open("hello.txt", "r") as f:
print(f.read())
>>>안녕안녕안녕안녕안녕안녕안녕안녕안녕안녕
```

여기서는 with 구문을 사용해서, 구문이 종료될때 자동으로 close가 보장됩니다.

## 5. 디렉터리

파일이 어느 디렉터리에 저장되어 있는가는 매우 중요한문제입니다. 예를 들어보죠.

project.txt라는 파일이 C:\Users\person\Documents에 위치해있다고 합시다. 이는 다음 그림과 같습니다.

![Untitled](Stage12%20%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A1%E1%84%8B%E1%85%A3%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%B5%E1%86%AB%2011d5b6e9819c4db5863536e52dc99a49/Untitled%203.png)

참고로 이러한 경로의 최상위 폴더를 루트 디렉터리 라고 부릅니다.

- window 운영체제 = C:\
- Linux계열 운영체제 = /

## 6. 모듈과 패키지

### **개념**

- **모듈(module) :** 파이썬으로 만든 코드가 들어간 파일 `.py`
- **패키지(package) :** 기능적으로 동일하거나 동일한 결과를 만드는 모듈들의 집합 또는 폴더. 종종 라이브러리라고도 불림
- **라이브러리(library) :** 모듈과 패키지의 집합. 패키지보다 포괄적인 개념이나 패키지와 혼용되어 사용되기도 함.
- **PIP(Package Installer for Python) :** 패키지 관리자로 파이썬을 설치하면 기본으로 설치됨
- **PyPA(Python Packaging Authority) :** 파이선 패키지를 관리하고 유지하는 그룹
- **PyPI(The Python Package Index) :** 파이썬 패키지들의 저장소

## 7. CSV파일

CSV는 comma seperated value의 약자로, 쉼표로 구분된 파일을 말합니다.

각각의 컬럼을 쉼표로 구분합니다. 

판다스는 to_csv메서드를 지원합니다. 이 메서드를 이용하면 csv파일로 쉽게 저장할 수 있습니다. 예를 들어보겠습니다.

```python
fields = ["title", "singer", "released date"]
rows = [ ["Tho Box","Roddy Ricch","2019-12-19"],
["Don't Start Now", "Dua Lipa", "2019-11-01"],
["Life Is Good", "Future Featuring Drake", "2020-02-10"],
["Blinding", "The Weeknd", "2019-11-29"],
["Circles", "Post Malone","2019-08-30"]]

import pandas as pd

df=pd.DataFrame(rows, columns=fields)
df.to_csv('pandas.csv',index=False)
```

반대로, csv파일을 데이터프레임으로 변환시키면 사용자가 편집하기 용이합니다.

![Untitled](Stage12%20%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A1%E1%84%8B%E1%85%A3%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%B5%E1%86%AB%2011d5b6e9819c4db5863536e52dc99a49/Untitled%204.png)

## 8. XML파일

XML은 다목적 마크업 언어입니다. 웹상에서 문서를 교환할때 이러한 마크업 언어를 사용합니다. 간단한 XML파일을 살펴봅시다.

```markup
<Person>
    <Name>이펠</Name>
    <Age>28</Age>
    <Place>강남</Place>
</Person>

#- 꺾쇠 괄호 안에 태그 이름을 정의하고, 태그 사이에 데이터를 기록하는 형식입니다.
#- 참고로, 태그 이름은 사용자가 마음대로 지정할 수 있습니다.
```

여기서 괄호 부분을 태그라고 부릅니다. 태그는 기본적으로 다음과 같은 형태로 구성되어있습니다. 

![Untitled](Stage12%20%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A1%E1%84%8B%E1%85%A3%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%B5%E1%86%AB%2011d5b6e9819c4db5863536e52dc99a49/Untitled%205.png)

![Untitled](Stage12%20%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%8B%E1%85%B4%20%E1%84%83%E1%85%A1%E1%84%8B%E1%85%A3%E1%86%BC%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%87%E1%85%A7%E1%86%AB%E1%84%89%E1%85%B5%E1%86%AB%2011d5b6e9819c4db5863536e52dc99a49/Untitled%206.png)

태그안에 태그가 존재할 수 도있는데요. 이런관계를 부모-자식관계라고도 합니다. 예를 들어보죠.

```markup
  <Table>
         <Row>
            <Cell>
               <Data ss:Type="String">Notice</Data>
            </Cell>
         </Row>
```

### XML 파일 만들기

지금부터 간단한 XML파일을 만들어 보겠습니다. 파이썬 표준 라이브러리인 ElementTree는 XML관련 기능을 제공합니다.

```python
import xml.etree.ElementTree as ET

person = ET.Element("Person") # 태그생성
name = ET.Element("name")
name.text = "이펠" # 텍스트 내용 생성
person.append(name)

age = ET.Element("age")
age.text = "28"
person.append(age)

ET.SubElement(person, 'place').text = '강남' #자식태그생성
ET.dump(person)
>>>
```

```markup
<Person>
<name>이펠</name>
<age>28</age>
<place>강남</place>
</Person>
```

## 9. JSON 파일

Json은 JavaScript Object Notation의 약자로, 웹언어인 JavaScript의 데이터 객체 표현 방식입니다. 웹 브라우저와 다른 애플리케이션 사이에서 HTTP 요청으로 데이터를 보낼 때 널리 사용하는 표준 파일 포맷 중 하나로, XML과 더불어 웹 API나 config 데이터를 전송할 때 많이 쓰입니다.

예를 살펴봅시다.

```json
person = {
      "first name" : "Yuna",
      "last name" : "Jung",
      "age" : 33,
      "nationality" : "South Korea",
      "education" : [{"degree":"B.S degree", "university":"Daehan university", "major": "mechanical engineering", "graduated year":2010}]
       }

```

얼핏보아도 파이썬의 딕셔너리와 유사한 구조입니다.